(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[574],{5804:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shelter",function(){return s(7453)}])},6555:function(e,n,s){"use strict";s.d(n,{Z:function(){return x}});var r=s(5893);s(7294);var i=s(5005),t=s(5147),c=s(1287),a=s.n(c),l=s(5617),o=s(7980),d=s(2697),u=s(6969),h=function(){let e=(0,l.I0)(),n=(0,l.v9)(e=>e.findings),s=(0,l.v9)(e=>e.storage);return{handleAddToStorage:()=>{e((0,d.Vx)(Object.keys(n).reduce((e,r)=>(e[r]=(s[r]||0)+n[r],e),{...s}))),e((0,u.mc)())}}};function x(){var e;let{handleAddToStorage:n}=h(),s=(0,l.v9)(e=>e.findings),c=(0,l.v9)(e=>e.resource);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{onClick:n,children:"저장고에 추가"}),(0,r.jsxs)("div",{children:["총 무게: ",(e=s,Object.keys(e).reduce((n,s)=>n+=e[s]*c[s].weight,0))]}),(0,r.jsxs)(t.Z,{className:a().findings,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"이름"}),(0,r.jsx)("th",{children:"수량"}),(0,r.jsx)("th",{children:"무게"}),(0,r.jsx)("th",{children:"가치"}),(0,r.jsx)("th",{children:"여분"})]})}),(0,r.jsx)("tbody",{children:Object.keys(s).map(e=>(0,r.jsx)(o.Z,{resource:e,pageName:"findings"},e))})]})]})}},7980:function(e,n,s){"use strict";s.d(n,{Z:function(){return u}});var r=s(5893),i=s(5005),t=s(5617),c=s(4129),a=s.n(c),l=s(4042),o=s(6969),d=s(2697);function u(e){let{resource:n,pageName:s}=e,c=(0,t.v9)(e=>e.storage[n]),u=(0,t.v9)(e=>e.findings[n]),h="storage"===s?c:u,x="storage"===s?d.IH:o.IH,j="storage"===s?d.eJ:o.eJ,{className:_,korean:g,maxQuantity:f,value:m,color:v,weight:k}=(0,t.v9)(e=>e.resource[n]),p=f-(c+u),b=(0,t.I0)();return(0,r.jsxs)("tr",{className:a().resourceRow+" "+a()[_]+" "+a()[v+"Token"],children:[(0,r.jsx)("td",{children:g}),(0,r.jsx)("td",{className:h?"":a().zero,children:(0,r.jsxs)("div",{className:a().flexContainer,children:[(0,r.jsx)(i.Z,{variant:"success",disabled:!p,onClick:()=>b(x({resource:n,quantity:1})),children:"+"})," ".concat(h," "),(0,r.jsx)(i.Z,{variant:"danger",disabled:!h,onClick:()=>b(j({resource:n,quantity:1})),children:"-"})]})}),(0,r.jsx)("td",{className:a().weight,children:k}),(0,r.jsx)("td",{className:a().value,children:(0,r.jsxs)("div",{className:a().flexContainer,children:[(0,r.jsx)(i.Z,{variant:"success",onClick:()=>b((0,l._I)({resource:n,modifier:1})),children:"+"})," ".concat(-1!==m?m:"거래 불가(-1)"," "),(0,r.jsx)(i.Z,{variant:"danger",disabled:m<0,onClick:()=>b((0,l.hB)({resource:n,modifier:1})),children:"-"})]})}),(0,r.jsx)("td",{className:p?"":a().zero,children:p})]})}},7453:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return I}});var r=s(5893),i=s(7294),t=s(5147),c=s(5617),a=s(8164),l=s.n(a),o=s(7980);function d(){let e=(0,c.v9)(e=>e.resource);return(0,r.jsxs)(t.Z,{className:l().storage,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"이름"}),(0,r.jsx)("th",{children:"수량"}),(0,r.jsx)("th",{children:"무게"}),(0,r.jsx)("th",{children:"가치"}),(0,r.jsx)("th",{children:"여분"})]})}),(0,r.jsx)("tbody",{children:Object.keys(e).map(e=>(0,r.jsx)(o.Z,{resource:e,pageName:"storage"},e))})]})}var u=s(1637),h=s(325);function x(e){let{setPage:n}=e;return(0,r.jsx)(u.Z,{bg:"secondary",variant:"dark",children:(0,r.jsxs)(h.Z,{className:"me-auto",children:[(0,r.jsx)(h.Z.Link,{onClick:()=>{n("storage")},children:"저장고"}),(0,r.jsx)(h.Z.Link,{onClick:()=>{n("findings")},children:"발견물 더미"}),(0,r.jsx)(h.Z.Link,{onClick:()=>{n("trading")},children:"거래"})]})})}var j=s(6555),_=s(1676),g=s(5005),f=s(5928),m=s.n(f),v=s(1692),k=s.n(v),p=s(292);function b(e){let{possession:n,resourceList:s,className:i}=e,a=(0,c.v9)(e=>e.trading[n]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(t.Z,{className:i,children:[(0,r.jsx)(T,{possession:n}),(0,r.jsx)("tbody",{children:Object.entries(s).filter(e=>{let[n,s]=e;return 0!==s}).map(e=>{let[s,i]=e;return(0,r.jsx)(y,{name:s,forSaleQuantity:a[s],currentQuantity:i,possession:n},s)})})]})})}function T(e){let{possession:n}=e;return(0,r.jsxs)("thead",{children:[(0,r.jsx)("tr",{children:(0,r.jsx)("th",{colSpan:5,children:"myself"===n?"나":"상대방"})}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"이름"}),(0,r.jsx)("th",{children:"판매량"}),(0,r.jsx)("th",{children:"재고량"}),(0,r.jsx)("th",{children:"무게"}),(0,r.jsx)("th",{children:"가치"})]})]})}function y(e){let{name:n,forSaleQuantity:s,currentQuantity:i,possession:t}=e,{value:a,weight:l,korean:o}=(0,c.v9)(e=>e.resource[n]),d=(0,c.I0)();return(0,r.jsxs)("tr",{className:k().tradingTableRow,children:[(0,r.jsx)("td",{children:o}),(0,r.jsxs)("td",{children:[(0,r.jsx)(g.Z,{variant:"success",className:k().plus,onClick:()=>d((0,p.IH)({person:t,resource:n})),disabled:s>=i,children:"+"}),s,(0,r.jsx)(g.Z,{variant:"danger",className:k().minus,onClick:()=>d((0,p.eJ)({person:t,resource:n})),disabled:!s,children:"-"})]}),(0,r.jsx)("td",{children:i}),(0,r.jsx)("td",{children:l}),(0,r.jsx)("td",{children:a})]})}var w=s(2697),N=s(6969);function R(){let{tradingPlace:e,handleTradingPlaceChange:n}=function(){let[e,n]=(0,i.useState)("outside"),s=(0,c.I0)();return{tradingPlace:e,handleTradingPlaceChange:e=>{n(e.target.value),s((0,p.mc)())}}}(),[s,t]=(0,i.useState)(0),a=(0,c.v9)(e=>e.storage),l=(0,c.v9)(e=>e.findings),o=(0,c.v9)(e=>e.resource),{myself:d,opponent:u}=(0,c.v9)(e=>e.trading),h=(0,c.I0)(),x=e=>Object.keys(e).reduce((n,s)=>n+=e[s]*o[s].value,0),j=x(d),f=x(u);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h1",{children:["거래 수수료:"," ",(0,r.jsx)(g.Z,{variant:"success",className:m().plus,onClick:()=>t(e=>e+1),children:"+"}),s,(0,r.jsx)(g.Z,{variant:"danger",className:m().minus,disabled:!s,onClick:()=>{s>0&&t(e=>e-1)},children:"-"})]}),(0,r.jsxs)(_.Z,{children:[(0,r.jsx)(_.Z.Check,{value:"shelter",label:"피난처",checked:"shelter"===e,onChange:n}),(0,r.jsx)(_.Z.Check,{value:"outside",label:"수집 지역",checked:"outside"===e,onChange:n})]}),(0,r.jsxs)("div",{children:["내 가치: ",j," vs 상대방 가치: ",f," + 거래 수수료:"," ",s]}),(0,r.jsx)(g.Z,{variant:"primary",onClick:()=>{(function(e,n,s,r){let i=Z(w.IH,w.eJ,r),t=Z(N.IH,N.eJ,r);"shelter"===s?i(e,n):t(e,n)})(d,u,e,h),h((0,p.mc)())},disabled:j<f+s,children:"거래 체결"}),(0,r.jsxs)("div",{className:m().container,children:[(0,r.jsx)("div",{className:"".concat(m().flexItem," ").concat(m().myself),children:(0,r.jsx)(b,{possession:"myself",className:m().myself,resourceList:(0,i.useMemo)(()=>{var n;return Object.keys(n="outside"===e?l:a).map(e=>e).filter(e=>n[e]>0&&o[e].value>0).reduce((e,s)=>(e[s]=n[s],e),{})},[e,a,l,o])})}),(0,r.jsx)("div",{className:"".concat(m().flexItem," ").concat(m().opponent),children:(0,r.jsx)(b,{possession:"opponent",className:m().opponent,resourceList:(0,i.useMemo)(()=>Object.keys(a).map(e=>e).filter(e=>o[e].maxQuantity-(a[e]+l[e])>0&&o[e].value>0).reduce((e,n)=>(e[n]=o[n].maxQuantity-(a[n]+l[n]),e),{}),[a,l,o])})})]})]})}function Z(e,n,s){return(r,i)=>{C(e,i,s),C(n,r,s)}}let C=(e,n,s)=>{Object.keys(n).filter(e=>n[e]>0).forEach(r=>s(e({resource:r,quantity:n[r]})))};function I(){let[e,n]=(0,i.useState)("storage");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{setPage:n}),"storage"===e&&(0,r.jsx)(d,{}),"findings"===e&&(0,r.jsx)(j.Z,{}),"trading"===e&&(0,r.jsx)(R,{})]})}},1287:function(e){e.exports={findings:"Findings_findings__PtqLB"}},4129:function(e){e.exports={greenToken:"ResourceRow_greenToken__NmrYI",redToken:"ResourceRow_redToken__3aTR9",yellowToken:"ResourceRow_yellowToken__EeAm_",grayToken:"ResourceRow_grayToken__8_s7d",brownToken:"ResourceRow_brownToken__Rzsf3",blueToken:"ResourceRow_blueToken__B3cau",resourceRow:"ResourceRow_resourceRow__qXwI8",zero:"ResourceRow_zero___kqrP",flexContainer:"ResourceRow_flexContainer__7BSnQ",value:"ResourceRow_value__CpkAF"}},8164:function(e){e.exports={storage:"Storage_storage__YdMEe"}},5928:function(e){e.exports={container:"Trading_container__Vnzuv",flexItem:"Trading_flexItem__LA7jG",opponent:"Trading_opponent__qiYYa",myself:"Trading_myself__jn0Lx",plus:"Trading_plus__EEp1B",minus:"Trading_minus__PSA8R"}},1692:function(e){e.exports={tradingTableRow:"TradingTable_tradingTableRow__poU_z",plus:"TradingTable_plus__ZtlrY",minus:"TradingTable_minus__UQWX2"}}},function(e){e.O(0,[721,774,888,179],function(){return e(e.s=5804)}),_N_E=e.O()}]);